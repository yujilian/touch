<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title></title>
    <style>
        #div1{
            width: 100px;
            height: 100px;
            background: pink;
            position: absolute;
            left: 50px;
            top: 50px;
        }
        #div2{
            width: 100px;
            height: 100px;
            background: pink;
            position: absolute;
            left: 500px;
            top: 250px;
        }
    </style>
    <script>
        function ran(n,m){
            return parseInt(Math.random()*(m-n)+n)
        }
        window.onload=function(){
            var oDiv1=document.getElementById('div1');
            var oDiv2=document.getElementById('div2');
            
            oDiv1.onmousedown=function(ev){
                var oEvent=ev||Event;
                var disX=oEvent.clientX-oDiv1.offsetLeft;
                var disY=oEvent.clientY-oDiv1.offsetTop;
                
                document.onmousemove=function(ev){
                    var oEvent=ev||Event;
                    var l=oEvent.clientX-disX;
                    var t=oEvent.clientY-disY;
                    
                    var l1=oDiv1.offsetLeft;
                    var r1=l1+oDiv1.offsetWidth;
                    var t1=oDiv1.offsetTop;
                    var b1=t1+oDiv1.offsetHeight;

                    var l2=oDiv2.offsetLeft;
                    var r2=l2+oDiv2.offsetWidth;
                    var t2=oDiv2.offsetTop;
                    var b2=t2+oDiv2.offsetHeight;
                    
                    if(l1>r2 || l2>r1 || t1>b2 || t2>b1){
                        oDiv2.style.background='pink';
                    }else{
                        oDiv2.style.background='rgb('+ran(0,256)+','+ran(0,256)+','+ran(0,256)+')';
                    }
                    
                    oDiv1.style.left=l+'px';
                    oDiv1.style.top=t+'px';
                };
                document.onmouseup=function(){
                    document.onmousemove=null;
                    document.onmouseup=null;
                };
                return false
            };
        };
    </script>
</head>
<body>
<div id="div1">div1</div>
<div id="div2">div2</div>
</body>
</html>